{"version":3,"sources":["scripts/main.js"],"names":["gameHeader","document","querySelector","messageStart","messageLose","messageWin","start","allCell","querySelectorAll","cell","score","randomNumber","notRandomNumbers","Math","floor","random","length","classAdder","forEach","element","innerText","className","createNewCell","number","classList","remove","freeCells","filter","textContent","newCell","max","add","addEventListener","e","target","contains","changes","key","array","i","innerHTML","row","elementParent","parentElement","children","position","find","result","cellIndex","j"],"mappings":"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","file":"main.c28adb17.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst gameHeader = document.querySelector('.game-header');\nconst messageStart = document.querySelector('.message-start');\nconst messageLose = document.querySelector('.message-lose');\nconst messageWin = document.querySelector('.message-win');\nconst start = gameHeader.querySelector('.start');\nconst allCell = document.querySelectorAll('.field-cell');\nconst cell = document.querySelectorAll('.field-cell');\nconst score = document.querySelector('.game-score');\n\nfunction randomNumber() {\n  const notRandomNumbers = [2, 2, 2, 2, 2, 2, 2, 2, 2, 4];\n  const index = Math.floor(Math.random() * notRandomNumbers.length);\n\n  return notRandomNumbers[index];\n}\n\nstart.addEventListener('click', (e) => {\n  if (e.target.textContent === 'Restart') {\n    for (const element of allCell) {\n      element.classList = 'field-cell';\n      element.textContent = '';\n    }\n\n    if (!messageWin.classList.contains('hidden')) {\n      messageWin.classList = 'hidden';\n    }\n\n    if (!messageLose.classList.contains('hidden')) {\n      messageLose.classList = 'hidden';\n    }\n\n    score.textContent = 0;\n\n    createNewCell(randomNumber());\n    createNewCell(randomNumber());\n\n    return;\n  };\n\n  createNewCell(randomNumber());\n  createNewCell(randomNumber());\n\n  start.textContent = 'Restart';\n  start.classList = 'button restart';\n  messageStart.classList = 'hidden';\n});\n\ndocument.addEventListener('keydown', (e) => {\n  let changes;\n\n  switch (e.key) {\n    case 'ArrowRight':\n      const array = [...allCell];\n\n      for (let i = 15; i >= 0; i--) {\n        if (array[i].innerHTML !== '') {\n          const element = array[i];\n          const elementParent = element.parentElement;\n          const row = [...elementParent.children];\n          const position = row\n            .find(result => result === element).cellIndex;\n\n          for (let j = position + 1; j < 4; j++) {\n            if (row[j].innerHTML === '' && j !== 3) {\n              continue;\n            } else if (row[j].innerHTML === element.innerHTML) {\n              row[j].innerHTML\n                = +row[j].innerHTML + +element.innerHTML;\n              score.innerText = +score.innerText + +row[j].innerText;\n            } else if (row[j].innerHTML !== ''\n              && j !== position + 1) {\n              row[j - 1].innerHTML = element.innerHTML;\n            } else if (row[j].innerHTML === '') {\n              row[j].innerHTML = element.innerHTML;\n            } else {\n              break;\n            }\n            changes = true;\n            row[position].innerHTML = '';\n            break;\n          }\n        } else {\n          continue;\n        }\n      }\n      break;\n  }\n\n  switch (e.key) {\n    case 'ArrowLeft':\n      const array = [...allCell];\n\n      for (let i = 0; i < 16; i++) {\n        if (array[i].innerHTML) {\n          const element = array[i];\n          const elementParent = element.parentElement;\n          const row = [...elementParent.children];\n          const position = row\n            .find(result => result === element).cellIndex;\n\n          for (let j = position - 1; j >= 0; j--) {\n            if (row[j].innerHTML === '' && j !== 0) {\n              continue;\n            } else if (row[j].innerHTML === element.innerHTML) {\n              row[j].innerHTML\n                = +`${row[j].innerHTML}` + +`${element.innerHTML}`;\n              score.innerText = +score.innerText + +row[j].innerText;\n            } else if (row[j].innerHTML !== ''\n              && j !== position - 1) {\n              row[j + 1].innerHTML = element.innerHTML;\n            } else if (row[j].innerHTML === '') {\n              row[j].innerHTML = element.innerHTML;\n            } else {\n              break;\n            }\n            changes = true;\n            row[position].innerHTML = '';\n            break;\n          }\n        } else {\n          continue;\n        }\n      }\n      break;\n  }\n\n  switch (e.key) {\n    case 'ArrowDown':\n      const array = [...allCell];\n\n      for (let i = 15; i >= 0; i--) {\n        if (array[i].innerHTML !== '') {\n          for (let j = i + 4; j <= 15; j += 4) {\n            if (array[j].innerHTML === '' && j < 12) {\n              continue;\n            } else if (array[j].innerHTML === array[i].innerHTML) {\n              array[j].innerHTML\n              = +array[j].innerHTML + +array[i].innerHTML;\n              score.innerText = +score.innerText + +array[j].innerText;\n            } else if (array[j].innerHTML !== ''\n            && j !== i + 4) {\n              array[j - 4].innerHTML = array[i].innerHTML;\n            } else if (array[j].innerHTML === '') {\n              array[j].innerHTML = array[i].innerHTML;\n            } else {\n              break;\n            }\n            changes = true;\n            array[i].innerHTML = '';\n            break;\n          }\n        } else {\n          continue;\n        }\n      }\n      break;\n  }\n\n  switch (e.key) {\n    case 'ArrowUp':\n      const array = [...allCell];\n\n      for (let i = 0; i < 16; i++) {\n        if (array[i].innerHTML !== '') {\n          for (let j = i - 4; j >= 0; j -= 4) {\n            if (array[j].innerHTML === '' && j > 3) {\n              continue;\n            } else if (array[j].innerHTML === array[i].innerHTML) {\n              array[j].innerHTML\n              = +array[j].innerHTML + +array[i].innerHTML;\n              score.innerText = +score.innerText + +array[j].innerText;\n            } else if (array[j].innerHTML !== ''\n            && j !== i - 4) {\n              array[j + 4].innerHTML = array[i].innerHTML;\n            } else if (array[j].innerHTML === '') {\n              array[j].innerHTML = array[i].innerHTML;\n            } else {\n              break;\n            }\n            changes = true;\n            array[i].innerHTML = '';\n            break;\n          }\n        } else {\n          continue;\n        }\n      }\n      break;\n  }\n\n  if (changes) {\n    classAdder();\n    createNewCell(randomNumber());\n  }\n\n  const freeCells = [...cell].filter(element => element.textContent === ''\n  );\n\n  if (!changes && freeCells.length === 0) {\n    messageLose.classList = 'message message-lose';\n\n    return;\n  };\n});\n\nfunction classAdder() {\n  const arr = [...allCell];\n\n  arr.forEach(element => {\n    if (element.innerText !== '') {\n      element.className = `field-cell field-cell--${element.innerText}`;\n    } else {\n      element.className = 'field-cell';\n    }\n  });\n}\n\nfunction createNewCell(number) {\n  [...allCell].forEach(element => {\n    if (element.innerText === '2048') {\n      messageWin.classList.remove('hidden');\n    }\n  });\n\n  const freeCells = [...cell].filter(element => element.textContent === ''\n  );\n\n  function getRandomInt(max) {\n    return Math.floor(Math.random() * max);\n  }\n\n  const newCell = freeCells[getRandomInt(freeCells.length)];\n\n  newCell.classList.add(`field-cell--${number}`);\n  newCell.innerText = number;\n};\n"]}